2009-Aug-13  yselkowitz

	* bin/cygport.in: Remove privbindir PATH handling, as everything has
	been converted to functions.
	* lib/pkg_info.cygpart (__list_deps): Adapt accordingly.

	* lib/src_postinst.cygpart (__src_postinst): Move __prepdoc up before
	__prep_symlinks so dodoc verbosity is follow-up to install and not in the
	middle of the postinstall steps.

	Source restructring.
	* bin/cygport.in: Functions moved from here...
	* lib/*.cygpart: ...to here.
	* lib/Makefile.am:
	* lib/*.cygclass: Cygclasses moved from here...
	* cygclass/*.cygclass: ...to here.
	* cygclass/Makefile.am: Added.
	* configure.ac (AC_OUTPUT): Added cygclass/Makefile.am.
	* Makefile.am (SUBDIRS): Added cygclass.
	* bin/Makefile.am (dist_privbin_SCRIPTS): Remove do*/new*, make_*.
	* bin/do*, bin/new*, bin/make_*: Command scripts moved from here...
	* lib/src_install.cygpart: ...into here as functions.
	* bin/Makefile.am (dist_privbin_SCRIPTS): Remove prep_*.sh.
	* bin/prep_*.sh: Postinstall scripts moved from here...
	* lib/src_postinst.cygpart: ...into here as functions.

	* configure.ac: Post-release version bump.

2009-Aug-10  yselkowitz

	* Tagged 0.9.9.

	Modify PyGTK package naming scheme.
	* lib/pygtk.cygclass: Chop 2.x version suffixes from PN to ORIG_PN.

	Add support for QConf based packages.
	* lib/Makefile.am:
	* lib/qt4-qconf.cygclass: Added.

	OCaml 3.11 update.
	* lib/ocaml.cygclass (LIBCAMLRUN): Change to libcamlrun_shared.

	Update for binutils-2.19.51.
	* bin/cygport.in: binutils now defaults to --enable-auto-import.

	GNUstep improvements.
	* lib/gnustep.cygclass: Require gnustep-config (gnustep-make).
	(__gnustep_dir): New internal function.
	(gnustep_pkg_apps, gnustep_pkg_frameworks): New functions.
	* data/mirrors: Define mirror://gnustep/.

2009-Aug-03  yselkowitz

	* lib/Makefile.am:
	* lib/gnustep.cygclass: NEW cygclass for GNUstep packages.

2009-Jul-28  yselkowitz

	* lib/gst-plugins0.10.cygclass: Fix gnonlin package name.
	Update plugins for -bad .13 and -ugly .12.

	* configure.ac: Post-release version bump.

2009-Jul-23  yselkowitz

	* Tagged 0.9.8.1.

	* lib/git.cygclass: Fix syntax error in r7215.

2009-Jul-22  yselkowitz

	* Tagged 0.9.8.

	* bin/cygport.in (__pkg_diff):  Don't set default_excludes for
	gcc[34], since it provides a forked libtool.  Patch by Dave Korn:
	http://article.gmane.org/gmane.os.cygwin.ports.general/620

	* lib/git.cygclass: Accept GIT_SUBDIR to package only one subdirectory
	of a Git repository, since partial clones/checkouts aren't possible.
	(git_fetch): If pulling master/HEAD, don't clone history.

	* bin/cygport.in (__list_deps): Fix DEPS_PATH.

	* bin/cygport.in (__prepstrip, __list_deps): Handle *.cmxs OCaml native
	dynlink modules as DLLs.

2009-Jul-20  yselkowitz

	* bin/prep_libtool_modules.sh: Adjust ltversion grep for current libtool.

	* lib/apache2.cygclass: Only define APREQ_* if libapreq2-devel is installed.

	* lib/gtkmm.cygclass (gtkmm_autoreconf): Allow the wrappers to set
	the correct automake version.

	* lib/tcl.cygclass (LIBTK): Fixed typo.

	* lib/kde3.cygclass: Define KDEDIR for both cmake and autotools builds.

	* lib/kde4.cygclass: Define SRC_URI for kdevelop-3.9.94.
	(kde4_compile): Let FindAutomoc4 do it's job.
	(kde4_install): Accept arguments.

	* lib/Makefile.am:
	* lib/waf.cygclass: NEW cygclass for Waf-based packages.

2009-Jul-06  yselkowitz

	* bin/cygport.in: Do not define CPP/CXXCPP, as it messes up stages
	2/3 of the gcc build, and autoconf will do the right thing anyway:
	http://thread.gmane.org/gmane.os.cygwin.ports.general/615

2009-Jun-21  yselkowitz

	* bin/prep_freedesktop_mime.sh: postinstall should test for
	update-{desktop,mime}-database before running to avoid log spam;
	see http://cygwin.com/ml/cygwin/2009-06/msg00714.html

	* Post-release version bump.

2009-Jun-16  yselkowitz

	* Tagged 0.9.7.

	* lib/kde4.cygclass: Add SRC_URI for stable KOffice2.

	* lib/git.cygclass: Allow GIT_MODULE to be user-defined.

	* lib/xfce4.cygclass: Leave ORIG_PN handling to the .cygport file.
	(xfce4_autoreconf): Declare glib-gettext usage.
	(xfce4_compile): No need to override libexecdir any more.

	* lib/python.cygclass (python_optimize): Omit ${D} from compiled location.

2009-Jun-15  yselkowitz

	* bin/cygport.in (cyginstall):
	* lib/autotools.cygclass (cygconf): Default libexecdir should be /usr/lib;
	see http://cygwin.com/ml/cygwin-apps/2009-06/msg00101.html and thread.

2009-Jun-09  yselkowitz

	* lib/gnome.org.cygclass: GNOME development has moved from subversion
	to git; define GIT_URI instead of SVN_URI.

2009-Jun-05  yselkowitz

	* configure.ac: Post-release version bump.	

	* Tagged 0.9.6.

2009-Jun-04  yselkowitz

	* bin/cygport.in: Export CC, CXX, and friends.
	* lib/cmake.cygclass: Use CC, CXX, and LDFLAGS.

	* bin/cygport.in (__prepuac): New internal function to create side-by-side
	.manifest files for apps whose names trigger UAC.
	(__src_postinst): Call it.
	* data/Makefile.am:
	* data/uac-manifest.in: Add manifest template for it.

	* bin/cygport.in (__prepvargames): New internal function to run
	make_etc_defaults on scores files in /var/games.
	(__src_postinst): Call it.

	* bin/cygport.in (__prepman): Fix ncurses manpage postinstall:
	http://cygwin.com/ml/cygwin/2009-03/msg00987.html

	* bin/cygport.in (cygpatch): Fix .cygwin.patch application where
	SRC_DIR is deep: http://www.cygwin.com/ml/cygwin/2009-05/msg00281.html

	* bin/cygport.in: Set LDFLAGS default to "-Wl,--enable-auto-import".
	Set MAKEOPTS to number_of_cores + 1 even on multicore systems.
	* data/cygport.conf: Ditto, and document it.

	* bin/cygport.in (__config_equals, __config_get, __config_set):
	New internal functions for saving information across stages.
	(__src_prep): Use them to declare cygport_version.
	(__pkg_diff): Use them to detect gettext usage.
	* lib/autotools.cygclass (cygautoreconf): Use them to declare gettext and
	libtool usage.  If libtool is being used, force current gettext usage.
	* lib/gnome2.cygclass (gnome2_autoreconf): Fix packages that use intltool
	w/o glib-gettext.  Declare gettext usage.

	* lib/kde4.cygclass: Drop support for phonon tarballs; KDE now uses the
	phonon (4.3.1) provided by Qt 4.5.
	(kde4_compile): Disable gcc4 visibility (not supported on PE/COFF).

2009-May-05  yselkowitz

	* lib/ggz.cygclass: Refactor and simplify.

	* lib/kde3.cygclass (kde3_compile): -fvisibility is not supported
	on PE/COFF platforms, even with gcc-4.

	* lib/kde4.cygclass (kde4_compile): --enable-auto-import is now
	defined globally.
	* lib/qt4-cmake.cygclass (qt4_cmake_compile): Ditto.

2009-May-03  yselkowitz

	* lib/qt3.cygclass: --enable-auto-import is now defined globally.

	* lib/gst-plugins0.10.cygclass: twolame moved from -bad to -ugly.

	* bin/make_etc_defaults: Make sure target directory exists before copying.

	* lib/claws-mail.cygclass: Don't clobber LDFLAGS.

2009-Apr-20  yselkowitz

	* data/Makefile.am:
	* data/cygport-bash-completion: Added, contributed by Reini Urban.

2009-Apr-01  yselkowitz

	* lib/wxwidgets.cygclass (_wx_find_config): Add support for
	gtk2-unicode builds, and make it the default.  Remove msw support.

	* lib/gtkmm.cygclass (gtkmm_compile): Don't overwrite LDFLAGS.
	lib/opensync.cygclass (opensync_plugin_compile): Ditto.

	* lib/kde3.cygclass (kde3_compile): Fix --with-qt-includes/libraries
	configure options for new syntax.  Remove --without-ipv6-lookup.

	* lib/gtk2-perl.cygclass (gtk2_perl_compile): Fix manpages fixup
	for Cairo, which has no namespaced manpages.

	* lib/qt3.cygclass:
	* lib/qt4.cygclass: Define and export QMAKESPEC.

2009-Mar-30  yselkowitz

	* bin/cygport.in (cygpatch): Assume reversed patches were applied
	upstream and skip them, with a warning.

	* bin/cygport.in (unpack): Support .tar.xz archives.

2009-Mar-17  yselkowitz

	* bin/prep_freedesktop_mime.sh: Remove any update-generated files.

	* bin/cygport.in (__prepetc):
	* bin/prep_gtk2_modules.sh: Remove pango module handling, as only
	pango itself needs it.

	* configure.ac: Post-release version bump.

2009-Mar-11  yselkowitz

	* lib/git.cygclass (git_fetch): Honour .gitmodules.

	* bin/prep_freedesktop_mime.sh: Remove more update-generated files.

	* bin/cygport.in (__pkg_diff): Ignore *.qm (Qt compiled l10n files).

	* bin/make_etc_defaults: Create preremove script to remove if unchanged.

2009-Feb-24  yselkowitz

	* bin/prep_fonts_dir.sh: Fix encodings.dir creation (sourceware bug 9872).

2009-Feb-12  yselkowitz

	* lib/gstreamer.cygclass: Define GIT_URI.

	* lib/pygtk.cygclass: Allow usage within packages which ship their
	Python bindings together with the C library.

	* lib/xfce4.cygclass: Fix XFCE_VERSION for nano-version releases.

	* lib/kde3.cygclass (kde3_compile): Remove --disable-xinerama.

	* bin/cygport.in (__prepstrip): Assure that files are really PE-COFF
	before stripping them. (e.g. some .oct files aren't from Octave.)

	* bin/cygport.in (docinto): Leave dodir until dodoc, as it is needed
	then for the default case.

	* bin/cygport.in (__pkg_diff): Exclude binary graphics files by default.

2009-Feb-02  yselkowitz

	* lib/kde4.cygclass: Set SRC_URI for stable automoc4 and phonon.

	* lib/qt4-qmake.cygclass (cygqmake4): Pass given arguments to qmake.

2009-Jan-18  yselkowitz

	* lib/autotools.cygclass (cygautoreconf): Don't force path of autoreconf.

	* lib/kde4.cygclass: Update SRC_URI for automoc4, amarok-2, kdevplatform.

	* lib/ruby-gnome2.cygclass (ruby_gnome2_install): Fix installation
	of partially overlapping ri doc modules.

	* lib/bzr.cygclass (bzr_fetch),
	* lib/cvs.cygclass (cvs_fetch),
	* lib/git.cygclass (git_fetch),
	* lib/hg.cygclass (hg_fetch),
	* lib/svn.cygclass (svn_fetch): Use tar --exclude-vcs.

	* lib/autotools.cygclass (cygautoreconf): Install config.rpath based on
	configure.ac, as configure is not always present yet (e.g. CVS checkouts).

	* bin/cygport.in (docinto),
	* bin/dodoc,
	* bin/newdoc: Allow installing docs into custom dir under /usr/share/doc
	by calling docinto with a leading slash (e.g. /HTML/en/foo).
	* lib/kde3.cygclass (kde3_install),
	* lib/kde4.cygclass (kde4_install),
	* lib/ruby-gnome2.cygclass (ruby_gnome2_install): Use docinto /....

	* bin/cygport.in (__pkg_binpkg): Fix mixing of .list and pkg_CONTENTS.

	* bin/cygport.in (unpack): Support .tar.lzo archives.

	*  data/cygport.nanorc: Fix regexes, replacing \< with [[:<:]], etc:
	http://cygwin.com/ml/cygwin/2009-01/msg00531.html

	* configure.ac: Post-release version bump.

2009-Jan-09  yselkowitz

	* lib/kde3.cygclass: Fix SRC_URI for kdevelop-3.5.4.

2009-Jan-05  yselkowitz

	* lib/xfce4.cygclass: Rename gtk-engines-xfce binary package.

	* bin/cygport.in (__pkg_diff): Make .src.patch with diff -p.

	* lib/claws-mail.cygclass: Stop mangling ORIG_PN.

	* lib/kde3.cygclass (kde3_compile): Disable apidox for KDE3.

2008-Dec-18  yselkowitz

	* lib/ruby-gnome2.cygclass (ruby_gnome2_compile, ruby_gnome2_install):
	Fix rdoc generation when building monolithic ruby-gnome2-all.

	* lib/pygtk.cygclass (pygtk_compile): Use pygobject-codegen-2.0 if present.

	* lib/gtkmm.cygclass: Remove all number suffixes from ORIG_PN.

	* lib/gtk2-perl.cygclass (gtk2_perl_install): Avoid mv 'same file' error.

2008-Dec-08  yselkowitz

	* bin/cygport.in (__pkg_diff): Ignore *.jlc (compiled librep lisp) files.

	* bin/cygport.in (__prepetc): Fix per-package postinst/prerm install.

	* bin/cygport.in (cygpatch): Try with and without --binary.

	* lib/gtkmm.cygclass: Improve ORIG_PN. Fix DIFF_EXCLUDES for 2.24.

	* bin/prep_fonts_dir.sh: Simplify .pcf compression code.

2008-Nov-26  yselkowitz

	* lib/gst-plugins0.10.cygclass: Enable experimental plugins.
	Override winsock2.h detection in favour of sys/socket.h.

2008-Nov-09  yselkowitz

	* lib/ruby-gnome2.cygclass (ruby_gnome2_install): Accept RDOC_MODULE.

	* bin/cygport.in (lndirs): lndir is now in the distro as part of 
	modular X11, so we can require it unconditionally.

	* lib/fox-build.cygclass: Removed.

2008-Nov-05  yselkowitz

	* lib/xfce4.cygclass: Update for 4.6-beta.

	* bin/cygport.in (__pkg_dist): In the case of split binary packages, 
	an empty binary package is not required to be aside the source package.

	* Post-release version bump.

2008-Oct-28  yselkowitz

	* Tagged 0.9.3.

	* bin/cygport.in: Pack PVP into PV[1-*].
	(__pkg_binpkg): Accept foo_CONTENTS over PKG_CONTENTS[].

	* lib/gst-plugins0.10.cygclass: Add new plugins in -bad 0.10.9.

	* lib/xorg.cygclass: Add GIT_URI; rename font packages.

2008-Sep-28  yselkowitz

	* lib/bzr.cygclass,
	lib/cvs.cygclass: Only check for _URI during fetch.

	* bin/cygport.in (__src_fetch),
	lib/Makefile.am:
	lib/fossil.cygclass: NEW cygclass for Fossil checkouts.

	* bin/cygport.in (__src_fetch),
	lib/bzr.cygclass,
	lib/cvs.cygclass,
	lib/git.cygclass,
	lib/hg.cygclass,
	lib/mtn.cygclass,
	lib/svn.cygclass: Use inherited() instead of _USE_rcs_FETCH.

	* bin/cygport.in (pushd, popd): Added overrides. Use throughout.

	* lib/ruby.cygclass (ruby_install): Accept RDOC_MODULE.
	(rubyinto, doruby): Added.

	* lib/ruby-gnome2.cygclass: Add ruby-goocanvas.

2008-Sep-23  yselkowitz

	* lib/berkdb.cygclass (berkdb_compile) [tcl]: tclConfig.sh moved.

	* lib/autotools.cygclass (cygautoreconf),
	lib/gnome2.cygclass (gnome2_autoreconf): Detect missing LT_OUTPUT.

	* lib/autotools.cygclass (cygautoreconf): Better detection of autoconf2.5.
	Catch illegal WANT_AUTOCONF value.

	* bin/cygport.in (cygtest): Don't exit if tests causes errors.

2008-Sep-15  yselkowitz

	* lib/distutils.cygclass (distutils_install):
	Collision-protect zope/__init__.py in distutils.
	lib/zope.cygclass: Remove.

	* configure.ac: Post-release version bump.

2008-Sep-10  yselkowitz

	* Tagged 0.9.2.

	* Website moved to sourceware.org.

2008-Sep-07  yselkowitz

	* lib/ruby-gnome2.cygclass: Remove support for obsolete versions.
	(ruby_gnome2_install): Only install implibs where required.

	* lib/tcl.cygclass (TK_INCLUDEDIR, TK_LIBDIR): Define.

2008-Sep-05  yselkowitz

	* bin/cygport.in (__prepdoc):
	bin/dodoc:
	bin/newdoc:
	lib/autotools.cygclass (cygconf):
	lib/berkdb.cygclass (berkdb_install):
	lib/kde3.cygclass (kde3_install):
	lib/kde4.cygclass (kde4_install):
	lib/ruby-gnome2.cygclass (ruby_gnome2_install):
	Move docdir to /usr/share/doc/PACKAGE.

2008-Sep-02  yselkowitz

	* bin/cygport.in (__src_prep): Handle multiple-patch tarballs.

2008-Sep-01  yselkowitz

	* bin/make_desktop_entry: Update to 1.0 spec; allow additional args.

	* lib/Makefile.am:
	lib/rox.cygclass: NEW cygclass for ROX desktop packages.

	* lib/svn.cygclass: Fix SVN_MODULE where SVN_URI ends with SVN_BRANCH.

	* lib/distutils.cygclass: Simplify ORIG_PN definition.

	* lib/lua.cygclass: Remove support for obsolete 5.0.

	* lib/gnome.org.cygclass: Remove obsolete CVS_URI.

	* bin/cygport.in:
	lib/*.cygclass:
	readonly-protect functions; remove obsolete aliases.

	* bin/cygport.in: No need for _name variable.

	* bin/cygport.in (__check_function_ro): New function.

2008-Aug-31  yselkowitz

	* bin/cygport.in (__prepinstalldirs):
	libtool-2.2 does not relink during install on Cygwin.

	* lib/kde3.cygclass: Add KDevelop 3.5.3; remove obsolete versions.

	* bin/cygport.in (__srpm_extract): New function.
	(unpack): Call it for *.src.rpm sources.

	* bin/cygport.in:
	lib/berkdb.cygclass (berkdb_autoreconf):
	lib/cross.cygclass (cross_config_sub):
	lib/gnome2.cygclass (gnome2_autoreconf):
	lib/kde3.cygclass (kde3_autoreconf): Remove libtool 1.5 support.

	* bin/prep_libtool_modules.sh: Speed up libtool version detection.

	* lib/pygtk.cygclass: Remove deprecated packages.

	* bin/cygport.in: Tweak argument parser catch-all.

2008-Aug-29  yselkowitz

	* bin/cygport.in:
	bin/prep_libtool_modules.sh:
	lib/aspell-dict.cygclass:
	lib/ebook.cygclass:
	lib/qt3-qmake.cygclass:
	lib/qt4-qmake.cygclass:
	Clean up a number of old FIXMEs.

	* lib/gnome2.cygclass: No need to override localstatedir with rarian.

2008-Aug-28  yselkowitz

	* lib/ruby-gnome2.cygclass (ruby_gnome2_compile, ruby_gnome2_install):
	Enable rdoc generation, using ri docs, not HTML.

	* lib/ruby.cygclass (RI_SITEDIR): Define.
	(ruby_compile, ruby_install) [RDOC_SOURCE]: Build ri docs, not HTML.

	* bin/cygport.in (__oldpatch): Remove long-deprecated function.

	* bin/cygport.in: Allow autotools.cygclass to be manually re-inherit()ed.
	lib/autotools.cygclass: Document this feature.

	* bin/cygport.in (__prepman): Do not compress lzma-compressed manpages.

2008-Aug-27  yselkowitz

	* configure.in: Post-release version bump.

	* Tagged 0.9.1.

	* lib/gst-plugins0.10.cygclass: Update module lists.

	* lib/xorg.cygclass: Drop xorg- prefix from font-* packages.

	* lib/gtk2-perl.cygclass (gtk2_perl_compile):
	man still subs '.' for '::', so we still need to rename the manpages.

	* tests/bootstrap:
	Always run make dist first, unless in distcheck. Clean up after test.

2008-Aug-26  yselkowitz

	* bin/cygport.in (__gpg_verify, __src_prep):
	Only warn about missing gnupg if there is a signature to verify.
	Only verify signatures if existant; don't warn about "missing" sigs.
	Verify signatures in PATCH_URI if existant.
	Catch error if signature verification fails.

	* bin/cygport.in (cygautoreconf, cygconf, src_compile):
	Moved out; auto-inherit autotools instead.
	lib/autotools.cygclass:
	lib/Makefile.am: Added new cygclass for cygautoreconf and cygconf.

	* bin/make_etc_defaults:
	bin/prep_fonts_dir.sh:
	bin/prep_gtk2_modules.sh:
	lib/docbook.cygclass (docbook_sgml_postinst, docbook_sgml_prerm):
	(docbook_xml_postinst, docbook_xml_prerm):
	lib/ggz.cygclass (ggz_postinst):
	lib/php.cygclass (php_postinst):
	Use fully qualified paths for all commands in postinstall scripts.

2008-Aug-24  yselkowitz

	* lib/wxwidgets.cygclass: WX_VERSION is mandatory, no default value.

	* lib/berkdb.cygclass: Java and Tcl bindings are optional, depending
	on whether their respective cygclasses have already been inherited.

	* bin/cygport.in (inherited): New function.

	* lib/cmake.cygclass: NEW for cygcmake() and default src_compile().
	lib/kde4.cygclass: Call it.
	lib/opensync.cygclass: Ditto.
	lib/qt4-cmake.cygclass: Ditto.
	bin/cygport.in (cygcmake): Removed.

	* bin/dolib: Use libtool to install libtool libraries.

	* bin/cygport.in (__prepdoc): Don't default install ABOUT-NLS or INSTALL.

	* lib/berkdb.cygclass: Disable building of Java bindings.

	* lib/mono.cygclass: Remove MAKEOPTS override.

	* lib/qt3.cygclass:
	lib/qt3-qmake.cygclass:
	lib/Makefile.am:
	Move qmake code into separate qt3-qmake cygclass.

	* bin/cygport.in: Make dependency on diffstat required.

	* lib/fox-build.cygclass, lib/Makefile.am: Renamed old fox.cygclass.
	lib/fox.cygclass: Replaced with wxwidgets-style fox-config wrapper.

	* configure.in: Post-release version bump.

2008-Aug-22  yselkowitz

	* bin/cygport.in (_privclassdir): Move to $pkgdatadir/cygclass.
	lib/Makefile.am (cygclassdir): Ditto.

	* lib/Makefile.am (cygclass_DATA): Don't install gst-plugins0.8.cygclass.

	* lib/gtk2-perl.cygclass: PODs and manpages build OOTB on 1.7.
	Inter-module linking fixed in perl 5.10.0-5 and EU::D 0.300-2.

	* bin/cygport.in (__mkdirs, __finish): Managed mounts are extinct.
	bin/Makefile.am: Do not install make_managed_mount.

	* bin/cygport.in: Only run on Cygwin 1.7.

	* bin/cygport.in (__prepinfo): Compress only *.info* files.

	* configure.in: Post-release version bump.

2008-Aug-19  yselkowitz

	* Branched 0.3.13 for cygwin-1.5; trunk is now for cygwin-1.7.
